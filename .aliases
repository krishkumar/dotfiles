# ============================================================
# NAVIGATION & SHORTCUTS
# ============================================================

# Directory traversal
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ~="cd ~"
alias -- -="cd -"

# Project directories (Magic Ive)
alias mm="cd $MYMASTERDIR"
alias dd="cd $MYDOCDIR"
alias da="cd $MYARCHIVEDIR/digitalarchive"
alias aa="cd $MYARCHIVEDIR"
alias bb="cd $MYMASTERDIR/magicive-cloud"
alias ss="cd $MYMASTERDIR/scratch"
alias ops="cd $MYOPSDIR"
alias pub="cd ~/Library/Mobile\ Documents/iCloud\~com\~apple\~iBooks/Documents"

# General shortcuts
alias g="git"
alias h="history"
alias j="jobs"
alias v="vim"
alias vv="nvim"
alias o="open"
alias oo="open ."
alias dg="dig google.com"
alias r="ranger"
alias ssh="env TERM=xterm-256color ssh"

# ============================================================
# FILE OPERATIONS & LISTING
# ============================================================

# Detect which `ls` flavor is in use
if ls --color > /dev/null 2>&1; then # GNU `ls`
	colorflag="--color"
else # OS X `ls`
	colorflag="-G"
fi

# List variants
alias l="ls -l ${colorflag}"
alias la="ls -latr ${colorflag}"
alias lsd='ls -l ${colorflag} | grep "^d"'
alias lll='ls -latr ${colorflag}'

# Always use color output for `ls`
alias ls="command gls ${colorflag} --hyperlink=auto"

# Fuzzy finding
alias fz="fzf --preview '([[ -f {} ]] && (bat --style=numbers --color=always {} || cat {})) || ([[ -d {} ]] && (tree -C {} | less)) || echo {} 2> /dev/null | head -200'"
alias vvf='file=$(fzf) && nvim "$file"'

# File cleanup
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"
alias lscleanup="/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user && killall Finder"

# ============================================================
# GIT & VERSION CONTROL
# ============================================================

alias gg="lazygit"
alias readme="pandoc -s -f markdown -t man README.md | groff -T utf8 -man | less"

# ============================================================
# DEVELOPMENT TOOLS
# ============================================================

# Swift
alias swift="swift -F/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Frameworks -Xlinker -rpath -Xlinker /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Frameworks -lswiftCore"

# AI tools
alias name-image='npx ai-renamer $1 --provider=ollama --model=minicpm-v:latest'

# JSON utilities
alias prettyjson='python -m json.tool'

# Web scraping
alias webkit2png="webkit2png --ignore-ssl-check"

# Random generation
alias randgen="export LC_ALL=C; tr -dc '0-9a-zA-Z' < /dev/urandom | head -c 31"

# Learning
alias h='less ~/.zprezto/modules/git/alias.zsh'

# ============================================================
# NETWORK & WEB
# ============================================================

# HTTP methods
for method in GET HEAD POST PUT DELETE TRACE OPTIONS; do
	alias "$method"="lwp-request -m '$method'"
done

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en1"
alias ips="ifconfig -a | grep -o 'inet6\? \(\([0-9]\+\.[0-9]\+\.[0-9]\+\.[0-9]\+\)\|[a-fA-F0-9:]\+\)' | sed -e 's/inet6* //'"

# WHOIS lookups
alias whois="whois -h whois-servers.net"

# Traffic monitoring
alias sniff="sudo ngrep -d 'en1' -t '^(GET|POST) ' 'tcp and port 80'"
alias httpdump="sudo tcpdump -i en1 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\""

# Gzip-enabled curl
alias gurl='curl --compressed'

# ============================================================
# TEXT & CLIPBOARD
# ============================================================

# Clipboard operations
alias c="tr -d '\n' | pbcopy"

# Text encoding
alias rot13='tr a-zA-Z n-za-mN-ZA-M'
alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1]);"'

# ============================================================
# MACOS SPECIFIC
# ============================================================

# Finder operations
alias show="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
alias hide="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"
alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

# Trash management
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

# Xcode cleanup
alias xc='rm -rf ~/Library/Developer/Xcode/DerivedData'

# iCloud navigation
alias ic='cd ~/Library/Mobile\ Documents/com~apple~CloudDocs'

# PDF operations
alias mergepdf='/System/Library/Automator/Combine\ PDF\ Pages.action/Contents/Resources/join.py'
alias compresspdf='convert -density 200x200 -quality 60 -compress jpeg'

# Spotlight
alias spotoff="sudo mdutil -a -i off"
alias spoton="sudo mdutil -a -i on"

# Audio/Media
alias stfu="osascript -e 'set volume output muted true'"
alias pumpitup="osascript -e 'set volume 7'"
alias mp32caf="afconvert -f caff -d aac -c 1 "
alias podcast="mplayer -cache 8192"

# Utilities
alias plistbuddy="/usr/libexec/PlistBuddy"
alias badge="tput bel"

# ============================================================
# SYSTEM UTILITIES
# ============================================================

# System updates
alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup; npm update npm -g; npm update -g; sudo gem update'

# Cache flushing
alias flush="dscacheutil -flushcache; killall -HUP mDNSResponder"

# Utility fallbacks
command -v hd > /dev/null || alias hd="hexdump -C"
command -v md5sum > /dev/null || alias md5sum="md5"
command -v sha1sum > /dev/null || alias sha1sum="shasum"

# Miscellaneous
alias week='date +%V'
alias map="xargs -n1"
