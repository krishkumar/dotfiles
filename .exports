#!/usr/bin/env bash

# =============================================================================
# Shell Exports Configuration
# =============================================================================
# Environment variable exports for shell sessions
# Loaded by .zshrc and .bashrc
# =============================================================================

# -----------------------------------------------------------------------------
# Shell & Editor Configuration
# -----------------------------------------------------------------------------

# Default editor (nvim preferred over vim)
export EDITOR="nvim"
export VISUAL="$EDITOR"

# -----------------------------------------------------------------------------
# Shell History Configuration
# -----------------------------------------------------------------------------

# Increase history size (32Â³ = 32768 entries; default is 500)
export HISTSIZE=32768
export HISTFILESIZE="$HISTSIZE"

# Ignore duplicate commands in history
export HISTCONTROL=ignoredups

# Add timestamps to history entries
export HISTTIMEFORMAT="%F %T "

# Commands to exclude from history
export HISTIGNORE="ls:cd:cd -:pwd:exit:date:* --help:history"

# -----------------------------------------------------------------------------
# Locale & Language Settings
# -----------------------------------------------------------------------------

# Use US English with UTF-8 encoding
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# -----------------------------------------------------------------------------
# Terminal, Pager & Color Configuration
# -----------------------------------------------------------------------------

# Pager configuration
export PAGER="less"
export MANPAGER="less -X"  # Don't clear screen after quitting man pages
export MANWIDTH=100        # Limit man page width for readability

# Enable color in man pages
export LESS_TERMCAP_mb=$'\e[1;31m'     # Begin bold
export LESS_TERMCAP_md=$'\e[1;33m'     # Begin blink
export LESS_TERMCAP_me=$'\e[0m'        # Reset bold/blink
export LESS_TERMCAP_so=$'\e[1;44;33m'  # Begin reverse video
export LESS_TERMCAP_se=$'\e[0m'        # Reset reverse video
export LESS_TERMCAP_us=$'\e[1;32m'     # Begin underline
export LESS_TERMCAP_ue=$'\e[0m'        # Reset underline

# LS_COLORS for colorized ls output
export LS_COLORS='no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35'

# Modern tool configurations
export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border'
export BAT_THEME="TwoDark"

# -----------------------------------------------------------------------------
# Package Manager Configuration
# -----------------------------------------------------------------------------

# Homebrew
export HOMEBREW_PREFIX="/opt/homebrew"
export HOMEBREW_CASK_OPTS="--appdir=/Applications"
export HOMEBREW_NO_ANALYTICS=1
export HOMEBREW_NO_AUTO_UPDATE=1

# -----------------------------------------------------------------------------
# Development Tools & Languages
# -----------------------------------------------------------------------------

# PHP (phpenv)
# Note: Ensure phpenv is initialized in .zshrc with: eval "$(phpenv init -)"
export PHPENV_ROOT="$HOME/.phpenv"

# AI & Machine Learning
# HuggingFace cache location (on external SSD for space management)
# Warning: Requires /Volumes/SSD1 to be mounted
if [[ -d "/Volumes/SSD1" ]]; then
    export HF_HOME="/Volumes/SSD1/hf_home"
else
    # Fallback to home directory if external drive not mounted
    export HF_HOME="$HOME/.cache/huggingface"
fi

# -----------------------------------------------------------------------------
# Personal Directory Shortcuts
# -----------------------------------------------------------------------------

# iCloud Documents base path
export ICLOUD_DOCS="$HOME/Library/Mobile Documents/com~apple~CloudDocs/Documents/all"

# Magic Ive project directories
export MYOPSDIR="$ICLOUD_DOCS/ops"
export MYDEVDIR="$ICLOUD_DOCS/dev"
export MYARCHIVEDIR="$ICLOUD_DOCS/Archive"
export MYDOCDIR="$ICLOUD_DOCS"
export MYMASTERDIR="$HOME/master"

# -----------------------------------------------------------------------------
# Application-Specific Settings
# -----------------------------------------------------------------------------

# Claude Code
# Maintains project working directory across bash calls in agent mode
export CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR=1

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------

# Default AWS profile
export AWS_PROFILE=account-latest
